{"ast":null,"code":"var _jsxFileName = \"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/App.js\";\nimport React, { useContext, useEffect } from 'react';\nimport Layout from './Layout';\nimport { ContextUser } from '../components/UserContext';\nimport qs from 'query-string';\nimport axios from 'axios';\n\nconst App = () => {\n  const {\n    user,\n    setUser\n  } = useContext(ContextUser);\n  useEffect(() => {\n    const token = qs.parse(window.location.search);\n\n    if (token.access_token) {\n      axios.get('https://api.spotify.com/v1/me', {\n        headers: {\n          'Authorization': 'Bearer ' + token.access_token\n        }\n      }).then(res => console.log(res.data)).then(res => setUser({\n        token: token.access_token,\n        name: res.data.display_name\n      }));\n    }\n\n    return user;\n  }, []);\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:8888/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"Auth__button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 41\n    }\n  }, \"Log In\")), \"Welcome to my app, \", user && user.name));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/App.js"],"names":["React","useContext","useEffect","Layout","ContextUser","qs","axios","App","user","setUser","token","parse","window","location","search","access_token","get","headers","then","res","console","log","data","name","display_name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,OAAOC,EAAP,MAAe,cAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAChB,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA;AAAP,MAAkBR,UAAU,CAACG,WAAD,CAAlC;AACAF,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMQ,KAAK,GAAGL,EAAE,CAACM,KAAH,CAASC,MAAM,CAACC,QAAP,CAAgBC,MAAzB,CAAd;;AACA,QAAIJ,KAAK,CAACK,YAAV,EAAwB;AACtBT,MAAAA,KAAK,CAACU,GAAN,CAAU,+BAAV,EAA2C;AACzCC,QAAAA,OAAO,EAAE;AAAC,2BAAiB,YAAYP,KAAK,CAACK;AAApC;AADgC,OAA3C,EAEKG,IAFL,CAEUC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,CAFjB,EAGCJ,IAHD,CAGMC,GAAG,IAAIV,OAAO,CAAC;AAACC,QAAAA,KAAK,EAAEA,KAAK,CAACK,YAAd;AAA4BQ,QAAAA,IAAI,EAAEJ,GAAG,CAACG,IAAJ,CAASE;AAA3C,OAAD,CAHpB;AAID;;AACD,WAAOhB,IAAP;AACD,GATQ,EASN,EATM,CAAT;AAWA,sBACA,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAG,IAAA,IAAI,EAAC,6BAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAsC;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAtC,CADA,yBAEwBA,IAAI,IAAIA,IAAI,CAACe,IAFrC,CADA,CADA;AAQD,CArBD;;AAuBA,eAAehB,GAAf","sourcesContent":["import React, { useContext, useEffect } from 'react'\nimport Layout from './Layout';\nimport { ContextUser } from '../components/UserContext';\nimport qs from 'query-string';\nimport axios from 'axios';\n\nconst App = () => {\n  const {user, setUser} = useContext(ContextUser)\n  useEffect(() => {\n    const token = qs.parse(window.location.search);\n    if (token.access_token) {\n      axios.get('https://api.spotify.com/v1/me', {\n        headers: {'Authorization': 'Bearer ' + token.access_token}\n        }).then(res => console.log(res.data))\n      .then(res => setUser({token: token.access_token, name: res.data.display_name}))\n    }\n    return user;\n  }, [])\n\n  return (\n  <Layout>\n  <div>\n  <a href=\"http://localhost:8888/login\"><button className=\"Auth__button\">Log In</button></a>\n      Welcome to my app, {user && user.name}\n    </div>\n  </Layout>\n  )\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}