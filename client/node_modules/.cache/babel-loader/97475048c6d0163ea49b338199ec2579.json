{"ast":null,"code":"var _jsxFileName = \"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/Current.js\";\n\n/* eslint-disable no-unused-vars */\nimport React, { useState, useContext } from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport { ContextUser } from '../components/UserContext';\nconst spotifyWebApi = new Spotify();\n\nconst Current = () => {\n  const {\n    user,\n    setUser\n  } = useContext(ContextUser);\n  const [nowPlaying, setNowPlaying] = useState({});\n  const [error, setError] = useState('');\n\n  if (user.access_token) {\n    spotifyWebApi.setAccessToken(user.access_token);\n  }\n\n  async function getNowPlaying() {\n    try {\n      const playback = await spotifyWebApi.getMyCurrentPlaybackState(user.access_token).catch(err => setError(err.response));\n\n      if (playback) {\n        setNowPlaying({\n          name: playback.item.name,\n          image: playback.item.album.images[0].url\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 14\n          }\n        }, \"Nothing found!\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Current\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, error, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"Current__name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }\n  }, \"Currently Playing: \", nowPlaying.name), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: getNowPlaying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, \"Check Playback\"), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"Current__img\",\n    alt: \"album-art\",\n    src: nowPlaying.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  }));\n};\n\nexport default Current;","map":{"version":3,"sources":["/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/Current.js"],"names":["React","useState","useContext","Spotify","ContextUser","spotifyWebApi","Current","user","setUser","nowPlaying","setNowPlaying","error","setError","access_token","setAccessToken","getNowPlaying","playback","getMyCurrentPlaybackState","catch","err","response","name","item","image","album","images","url","console","log"],"mappings":";;AAAA;AACA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,QAA0C,OAA1C;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAASC,WAAT,QAA4B,2BAA5B;AAEA,MAAMC,aAAa,GAAG,IAAIF,OAAJ,EAAtB;;AAEA,MAAOG,OAAO,GAAG,MAAM;AACrB,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA;AAAP,MAAkBN,UAAU,CAACE,WAAD,CAAlC;AACA,QAAM,CAACK,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;;AAEA,MAAIM,IAAI,CAACM,YAAT,EAAuB;AACrBR,IAAAA,aAAa,CAACS,cAAd,CAA6BP,IAAI,CAACM,YAAlC;AACD;;AAED,iBAAeE,aAAf,GAAgC;AAC9B,QAAI;AACJ,YAAMC,QAAQ,GAAG,MAAMX,aAAa,CAACY,yBAAd,CAAwCV,IAAI,CAACM,YAA7C,EAA2DK,KAA3D,CAAiEC,GAAG,IAAIP,QAAQ,CAACO,GAAG,CAACC,QAAL,CAAhF,CAAvB;;AACA,UAAIJ,QAAJ,EAAc;AACZN,QAAAA,aAAa,CAAC;AAACW,UAAAA,IAAI,EAAEL,QAAQ,CAACM,IAAT,CAAcD,IAArB;AAA2BE,UAAAA,KAAK,EAAEP,QAAQ,CAACM,IAAT,CAAcE,KAAd,CAAoBC,MAApB,CAA2B,CAA3B,EAA8BC;AAAhE,SAAD,CAAb;AACD,OAFD,MAEO;AACL,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAP;AACD;AAAC,KANF,CAMG,OAAMf,KAAN,EAAa;AACdgB,MAAAA,OAAO,CAACC,GAAR,CAAYjB,KAAZ;AACD;AACF;;AACD,sBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCA,KADD,eAEA;AAAI,IAAA,SAAS,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAkDF,UAAU,CAACY,IAA7D,CAFA,eAGA;AAAQ,IAAA,OAAO,EAAEN,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHA,eAIA;AAAK,IAAA,SAAS,EAAC,cAAf;AAA8B,IAAA,GAAG,EAAC,WAAlC;AAA8C,IAAA,GAAG,EAAEN,UAAU,CAACc,KAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJA,CADF;AAQD,CA5BD;;AA8BA,eAAejB,OAAf","sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, {useState, useContext} from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport { ContextUser } from '../components/UserContext';\n\nconst spotifyWebApi = new Spotify();\n\nconst  Current = () => {\n  const {user, setUser} = useContext(ContextUser)\n  const [nowPlaying, setNowPlaying] = useState({})\n  const [error, setError] = useState('')\n\n  if (user.access_token) {\n    spotifyWebApi.setAccessToken(user.access_token)\n  }\n\n  async function getNowPlaying () {\n    try {\n    const playback = await spotifyWebApi.getMyCurrentPlaybackState(user.access_token).catch(err => setError(err.response))\n    if (playback) {\n      setNowPlaying({name: playback.item.name, image: playback.item.album.images[0].url})\n    } else {\n      return <p>Nothing found!</p>\n    }} catch(error) {\n      console.log(error);\n    }\n  }\n  return (\n    <div className=\"Current\">\n    {error}\n    <h2 className=\"Current__name\">Currently Playing: {nowPlaying.name}</h2>\n    <button onClick={getNowPlaying}>Check Playback</button>\n    <img className=\"Current__img\" alt=\"album-art\" src={nowPlaying.image}></img>\n    </div>\n  );\n}\n\nexport default Current;\n"]},"metadata":{},"sourceType":"module"}