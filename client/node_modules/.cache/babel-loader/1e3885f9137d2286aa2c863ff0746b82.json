{"ast":null,"code":"import _regeneratorRuntime from\"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable no-unused-vars */import React,{useState,useContext}from'react';import Spotify from'spotify-web-api-js';import{ContextUser}from'./UserContext';var spotifyWebApi=new Spotify();var Sorter=function Sorter(){var _useContext=useContext(ContextUser),user=_useContext.user,setUser=_useContext.setUser;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),playlists=_useState4[0],setPlaylists=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),tracks=_useState6[0],setTracks=_useState6[1];if(user.access_token){spotifyWebApi.setAccessToken(user.access_token);}var getAllSongsAndSort=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var tracks,res,array;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tracks=[];_context.next=3;return spotifyWebApi.getUserPlaylists(user.id,{limit:30});case 3:res=_context.sent;_context.next=6;return res.items.map(function(item){return item.id;});case 6:array=_context.sent;_context.next=9;return array.forEach(function(item){return spotifyWebApi.getPlaylistTracks(item).then(function(res){return tracks.push(res);});});case 9:_context.next=11;return console.log(tracks);case 11:case\"end\":return _context.stop();}}},_callee);}));return function getAllSongsAndSort(){return _ref.apply(this,arguments);};}();// .then(array => array.forEach(item => spotifyWebApi.getPlaylistTracks(item)\n// .then(array => setPlaylists(array)\n// .catch(err => console.log(err))\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"Sorter\"},error,/*#__PURE__*/React.createElement(\"button\",{onClick:getAllSongsAndSort},\"Get Playlists\"));};export default Sorter;","map":{"version":3,"sources":["/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/Sorter.js"],"names":["React","useState","useContext","Spotify","ContextUser","spotifyWebApi","Sorter","user","setUser","error","setError","playlists","setPlaylists","tracks","setTracks","access_token","setAccessToken","getAllSongsAndSort","getUserPlaylists","id","limit","res","items","map","item","array","forEach","getPlaylistTracks","then","push","console","log"],"mappings":"2iBAAA,mCACA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,UAAzB,KAA0C,OAA1C,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,OAASC,WAAT,KAA4B,eAA5B,CAEA,GAAMC,CAAAA,aAAa,CAAG,GAAIF,CAAAA,OAAJ,EAAtB,CAEA,GAAOG,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,iBACIJ,UAAU,CAACE,WAAD,CADd,CACbG,IADa,aACbA,IADa,CACPC,OADO,aACPA,OADO,eAEMP,QAAQ,CAAC,EAAD,CAFd,wCAEbQ,KAFa,eAENC,QAFM,8BAGcT,QAAQ,CAAC,EAAD,CAHtB,yCAGbU,SAHa,eAGFC,YAHE,8BAIQX,QAAQ,CAAC,EAAD,CAJhB,yCAIbY,MAJa,eAILC,SAJK,eAMpB,GAAIP,IAAI,CAACQ,YAAT,CAAuB,CACrBV,aAAa,CAACW,cAAd,CAA6BT,IAAI,CAACQ,YAAlC,EACD,CAED,GAAME,CAAAA,kBAAkB,0FAAG,wJACnBJ,MADmB,CACV,EADU,uBAEPR,CAAAA,aAAa,CAACa,gBAAd,CAA+BX,IAAI,CAACY,EAApC,CAAwC,CAACC,KAAK,CAAE,EAAR,CAAxC,CAFO,QAEnBC,GAFmB,qCAGLA,CAAAA,GAAG,CAACC,KAAJ,CAAUC,GAAV,CAAc,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACL,EAAT,EAAlB,CAHK,QAGnBM,KAHmB,qCAInBA,CAAAA,KAAK,CAACC,OAAN,CAAc,SAAAF,IAAI,QAAInB,CAAAA,aAAa,CAACsB,iBAAd,CAAgCH,IAAhC,EAAsCI,IAAtC,CAA2C,SAAAP,GAAG,QAAIR,CAAAA,MAAM,CAACgB,IAAP,CAAYR,GAAZ,CAAJ,EAA9C,CAAJ,EAAlB,CAJmB,+BAKnBS,CAAAA,OAAO,CAACC,GAAR,CAAYlB,MAAZ,CALmB,wDAAH,kBAAlBI,CAAAA,kBAAkB,0CAAxB,CASI;AACA;AACA;AACJ,mBACE,2BAAK,SAAS,CAAC,QAAf,EACCR,KADD,cAEA,8BAAQ,OAAO,CAAEQ,kBAAjB,kBAFA,CADF,CAMD,CA5BD,CA8BA,cAAeX,CAAAA,MAAf","sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, {useState, useContext} from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport { ContextUser } from './UserContext';\n\nconst spotifyWebApi = new Spotify();\n\nconst  Sorter = () => {\n  const {user, setUser} = useContext(ContextUser);\n  const [error, setError] = useState('');\n  const [playlists, setPlaylists] = useState('');\n  const [tracks, setTracks] = useState('');\n\n  if (user.access_token) {\n    spotifyWebApi.setAccessToken(user.access_token)\n  }\n\n  const getAllSongsAndSort = async () => {\n    const tracks = [];\n    const res = await spotifyWebApi.getUserPlaylists(user.id, {limit: 30})\n    const array = await res.items.map(item => item.id)\n    await array.forEach(item => spotifyWebApi.getPlaylistTracks(item).then(res => tracks.push(res)))\n    await console.log(tracks)\n    }\n\n\n      // .then(array => array.forEach(item => spotifyWebApi.getPlaylistTracks(item)\n      // .then(array => setPlaylists(array)\n      // .catch(err => console.log(err))\n  return (\n    <div className=\"Sorter\">\n    {error}\n    <button onClick={getAllSongsAndSort}>Get Playlists</button>\n    </div>\n  );\n}\n\nexport default Sorter;\n"]},"metadata":{},"sourceType":"module"}