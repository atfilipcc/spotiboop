{"ast":null,"code":"import _regeneratorRuntime from\"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable no-unused-vars */import React,{useState,useContext}from'react';import Spotify from'spotify-web-api-js';import{ContextUser}from'../components/UserContext';var spotifyWebApi=new Spotify();var Current=function Current(){var _useContext=useContext(ContextUser),user=_useContext.user,setUser=_useContext.setUser;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),nowPlaying=_useState2[0],setNowPlaying=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];if(user.access_token){spotifyWebApi.setAccessToken(user.access_token);}function getNowPlaying(){return _getNowPlaying.apply(this,arguments);}function _getNowPlaying(){_getNowPlaying=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var playback;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return spotifyWebApi.getMyCurrentPlaybackState(user.access_token).catch(function(err){return setError(err.response);});case 3:playback=_context.sent;if(!playback){_context.next=8;break;}setNowPlaying({name:playback.item.name,image:playback.item.album.images[0].url});_context.next=9;break;case 8:return _context.abrupt(\"return\",/*#__PURE__*/React.createElement(\"p\",null,\"Nothing found!\"));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _getNowPlaying.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"Current\"},error,/*#__PURE__*/React.createElement(\"h2\",{className:\"Current__name\"},\"Currently Playing: \",nowPlaying.name),/*#__PURE__*/React.createElement(\"button\",{onClick:getNowPlaying},\"Check Playback\"),/*#__PURE__*/React.createElement(\"img\",{className:\"Current__img\",alt:\"album-art\",src:nowPlaying.image}));};export default Current;","map":{"version":3,"sources":["/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/Current.js"],"names":["React","useState","useContext","Spotify","ContextUser","spotifyWebApi","Current","user","setUser","nowPlaying","setNowPlaying","error","setError","access_token","setAccessToken","getNowPlaying","getMyCurrentPlaybackState","catch","err","response","playback","name","item","image","album","images","url","console","log"],"mappings":"2iBAAA,mCACA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,UAAzB,KAA0C,OAA1C,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,OAASC,WAAT,KAA4B,2BAA5B,CAEA,GAAMC,CAAAA,aAAa,CAAG,GAAIF,CAAAA,OAAJ,EAAtB,CAEA,GAAOG,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,iBACGJ,UAAU,CAACE,WAAD,CADb,CACdG,IADc,aACdA,IADc,CACRC,OADQ,aACRA,OADQ,eAEeP,QAAQ,CAAC,EAAD,CAFvB,wCAEdQ,UAFc,eAEFC,aAFE,8BAGKT,QAAQ,CAAC,EAAD,CAHb,yCAGdU,KAHc,eAGPC,QAHO,eAKrB,GAAIL,IAAI,CAACM,YAAT,CAAuB,CACrBR,aAAa,CAACS,cAAd,CAA6BP,IAAI,CAACM,YAAlC,EACD,CAPoB,QASNE,CAAAA,aATM,iJASrB,sLAEyBV,CAAAA,aAAa,CAACW,yBAAd,CAAwCT,IAAI,CAACM,YAA7C,EAA2DI,KAA3D,CAAiE,SAAAC,GAAG,QAAIN,CAAAA,QAAQ,CAACM,GAAG,CAACC,QAAL,CAAZ,EAApE,CAFzB,QAEQC,QAFR,mBAGMA,QAHN,yBAIIV,aAAa,CAAC,CAACW,IAAI,CAAED,QAAQ,CAACE,IAAT,CAAcD,IAArB,CAA2BE,KAAK,CAAEH,QAAQ,CAACE,IAAT,CAAcE,KAAd,CAAoBC,MAApB,CAA2B,CAA3B,EAA8BC,GAAhE,CAAD,CAAb,CAJJ,0EAMW,8CANX,0FAQIC,OAAO,CAACC,GAAR,cARJ,qEATqB,gDAoBrB,mBACE,2BAAK,SAAS,CAAC,SAAf,EACCjB,KADD,cAEA,0BAAI,SAAS,CAAC,eAAd,wBAAkDF,UAAU,CAACY,IAA7D,CAFA,cAGA,8BAAQ,OAAO,CAAEN,aAAjB,mBAHA,cAIA,2BAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAC,WAAlC,CAA8C,GAAG,CAAEN,UAAU,CAACc,KAA9D,EAJA,CADF,CAQD,CA5BD,CA8BA,cAAejB,CAAAA,OAAf","sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, {useState, useContext} from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport { ContextUser } from '../components/UserContext';\n\nconst spotifyWebApi = new Spotify();\n\nconst  Current = () => {\n  const {user, setUser} = useContext(ContextUser)\n  const [nowPlaying, setNowPlaying] = useState({})\n  const [error, setError] = useState('')\n\n  if (user.access_token) {\n    spotifyWebApi.setAccessToken(user.access_token)\n  }\n\n  async function getNowPlaying () {\n    try {\n    const playback = await spotifyWebApi.getMyCurrentPlaybackState(user.access_token).catch(err => setError(err.response))\n    if (playback) {\n      setNowPlaying({name: playback.item.name, image: playback.item.album.images[0].url})\n    } else {\n      return <p>Nothing found!</p>\n    }} catch(error) {\n      console.log(error);\n    }\n  }\n  return (\n    <div className=\"Current\">\n    {error}\n    <h2 className=\"Current__name\">Currently Playing: {nowPlaying.name}</h2>\n    <button onClick={getNowPlaying}>Check Playback</button>\n    <img className=\"Current__img\" alt=\"album-art\" src={nowPlaying.image}></img>\n    </div>\n  );\n}\n\nexport default Current;\n"]},"metadata":{},"sourceType":"module"}