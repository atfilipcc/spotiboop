{"ast":null,"code":"var _jsxFileName = \"/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/Login.js\";\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { ContextUser } from '../components/UserContext';\nimport qs from 'query-string';\nimport axios from 'axios';\nexport const Login = () => {\n  const [user, setUser] = useState(ContextUser);\n  const [loggedIn, setLoggedin] = useState(false);\n  useEffect(() => {\n    const token = qs.parse(window.location.search);\n\n    if (token.access_token) {\n      setUser({\n        token: token.access_token\n      });\n      axios.get('https://api.spotify.com/v1/me', {\n        headers: {\n          'Authorization': 'Bearer ' + token.access_token\n        }\n      }).then(res => console.log(res.data)).then(res => setUser({ ...user,\n        name: res.data.display_name\n      }));\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }\n  }, \"Welcome! Please log in to use this app.\"), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }\n  }, \"Log In\"));\n};\nexport default Login;","map":{"version":3,"sources":["/Users/filip.cordas/Documents/Projects/web-api-auth-examples/client/src/components/Login.js"],"names":["React","useState","useMemo","useEffect","ContextUser","qs","axios","Login","user","setUser","loggedIn","setLoggedin","token","parse","window","location","search","access_token","get","headers","then","res","console","log","data","name","display_name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,OAA1B,EAAmCC,SAAnC,QAAoD,OAApD;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,OAAOC,EAAP,MAAe,cAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,KAAK,GAAG,MAAM;AACzB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAACG,WAAD,CAAhC;AACA,QAAM,CAACM,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,KAAD,CAAxC;AACAE,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,KAAK,GAAGP,EAAE,CAACQ,KAAH,CAASC,MAAM,CAACC,QAAP,CAAgBC,MAAzB,CAAd;;AACA,QAAIJ,KAAK,CAACK,YAAV,EAAwB;AACtBR,MAAAA,OAAO,CAAC;AAACG,QAAAA,KAAK,EAAEA,KAAK,CAACK;AAAd,OAAD,CAAP;AACAX,MAAAA,KAAK,CAACY,GAAN,CAAU,+BAAV,EAA2C;AACzCC,QAAAA,OAAO,EAAE;AAAC,2BAAiB,YAAYP,KAAK,CAACK;AAApC;AADgC,OAA3C,EAEKG,IAFL,CAEUC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,CAFjB,EAGCJ,IAHD,CAGMC,GAAG,IAAIZ,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUiB,QAAAA,IAAI,EAAEJ,GAAG,CAACG,IAAJ,CAASE;AAAzB,OAAD,CAHpB;AAID;AACF,GATQ,EASN,EATM,CAAT;AAUA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,CADF;AAMD,CAnBM;AAqBP,eAAenB,KAAf","sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\nimport { ContextUser } from '../components/UserContext';\nimport qs from 'query-string';\nimport axios from 'axios'\n\nexport const Login = () => {\n  const [user, setUser] = useState(ContextUser);\n  const [loggedIn, setLoggedin] = useState(false)\n  useEffect(() => {\n    const token = qs.parse(window.location.search);\n    if (token.access_token) {\n      setUser({token: token.access_token})\n      axios.get('https://api.spotify.com/v1/me', {\n        headers: {'Authorization': 'Bearer ' + token.access_token}\n        }).then(res => console.log(res.data))\n      .then(res => setUser({...user, name: res.data.display_name}))\n    }\n  }, [])\n  return (\n    <div>\n      <h1>Welcome! Please log in to use this app.</h1>\n      <button>Log In</button>\n    </div>\n  )\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}